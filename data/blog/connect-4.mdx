---
title: Connect 4 - Interview challenge solution
date: '2025-02-28'
tags: ['tech interviews', 'algorithms']
draft: false
summary: 'A step-by-step guide to implementing the classic Connect 4 game in JavaScript, covering board management, move validation, win detection, and player turns. Includes complete solution with code examples.'
---

## Content
**TLDR:** [GitHub Repo](https://github.com/christianguevara/connect-4)
<TOCInline toc={props.toc} exclude="Content" />

## What is connect 4 ?

Connect 4 is a classic two-player game where players take turns dropping colored tokens into a vertical grid.
The goal is to be the first player to form a line of 4 tokens either horizontally, vertically, or diagonally.

The game mechanics are straightforward:

1. The game board is a 7x7 grid that starts empty
2. Players take turns selecting a column to drop their token
3. The token falls to the lowest empty position in that column
4. A player wins by connecting 4 of their tokens in a line:
   - Horizontally (left to right)
   - Vertically (up and down) 
   - Diagonally (at a 45 degree angle)
5. If the board fills up with no winner, the game is a draw

<div className="mx-auto max-w-3/4">![Connect 4](https://i.ebayimg.com/images/g/DzMAAOSwSjxj6m0e/s-l1600.jpg)</div>

The key challenge in implementing Connect 4 is efficiently:

- Managing the game state (board representation)
- Handling token placement and gravity
- Detecting winning combinations
- Validating moves (full columns, out of bounds)
- Switching between players

Let's look at how we can implement this in code...

## Implementation Overview

The challenge starts with the following "base" code.

We need to implement: `play`, `checkWinner` and `print`, actually `print` is more like a helper.
For sure we can implement more methods or properties if needed.

```js
/**
Connect4

Connect4 is a game where two players take turns placing a token on columns that drop to the bottom.
When a player forms 4 of his tokens in a line - horizontally, vertically,or diagonally - the player wins.

[Visualization](https://i.ebayimg.com/images/g/DzMAAOSwSjxj6m0e/s-l1600.jpg)

Implement Connect 4 with the class below.
*/

export const PLAYER_ONE = 1
export const PLAYER_TWO = 2

export class Connect4 {
  constructor() {}
  play(col) {}
  checkWinner() {}
  print() {}
}
```

## Implementation
### Initialize the board

We need to keep track of some stuff like the board, the current player and the winner.
We can add the properties at class level.

```js
export class Connect4 {
  board;
  currentPlayer;
  winner;
  
  constructor() {}
}
```

Then we need to create a base board where we have the "slots" so the "chip" or token can fall in. In this case is the player number.

As you already imagined, we will work with 2D arrays. Something like.

<div className="w-full sm:max-w-1/2 mx-auto">
|   | 0 | 1 | 2 | 3 | 4 | 5 | 6 |
|---|---|---|---|---|---|---|---|
| 0 | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ |
| 1 | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ |
| 2 | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ |
| 3 | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ |
| 4 | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ |
| 5 | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ |
| 6 | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ |
</div>

So then we need to create the initial array with arrays (2D array).
I made a mistake when using the [fill()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/fill) method.
The error is pointed in code with a comment.

I was not able to see it at first but once I realized it was so obvious ðŸ˜….

Also `currentPlayer` is initialized.

```js
constructor() {
    // âŒ Same array reference to all positions in the first array
    // this.board = Array(BOARD_SIZE).fill(Array(BOARD_SIZE).fill(""));

    // Init the board
    this.board = Array(BOARD_SIZE)
      .fill(null)
      .map(() => Array(BOARD_SIZE).fill(""));
    
    this.currentPlayer = PLAYER_ONE;
  }
```

### The play method

The play method can be implemented in two ways
1. Start from the bottom of the col -_index 6_- and go up until an empty slot is found
2. Start from the top of the col -_index 0_- and go until you find a non-empty slot and then put the chip/token in the previous slot

Option 2 is the more _"natural way"_ but option 1 is easier to implement. So let's implement option 1

```js
...
export const BOARD_SIZE = 7;
export const SLOTS_TO_WIN = 4;

export class Connect4 {
  ...

  play(col) {
    for (let row = BOARD_SIZE - 1; row >= 0; row--) {
      const valueAtPos = this.board[row][col];

      // If slot is empty, put a value and break
      if (!valueAtPos) {
        this.board[row][col] = this.currentPlayer;
        this.checkWinner(row, col);
        break;
      }
    }
  }
}
```

One of the most important parts in this section, is the `break;` call to stop the loop to continue.

### Using .table() to print a nice looking board

[console.table()](https://developer.mozilla.org/en-US/docs/Web/API/console/table_static) allows you to print arrays and objects in a nice looking way.
Way easier than implementing 2x for loops to achieve almost the same result.

```js
export class Connect4 {
...

  print() {
    console.table(this.board);
  }
}
```

The code above will look like.

<div className="w-full sm:max-w-1/2 mx-auto">
![console.table() example](/static/images/connect-4-console-table.png)
</div>
### The difficult part of checkWinner()

To check for a winner we need to take into account that we need 4 chips in a row in total 4 cases into consideration:
1. Horizontally â†”
2. Vertically â†•
3. Diagonally from right to left  â†– and â†˜ (RTL)
4. Diagonally from left to right â†— and â†™ (LTR)



## Final thoughts and code

The final code for this Connect 4 implementation handles all the edge cases we discussed:

- Validates column input is within bounds
- Checks if column is full before playing
- Detects horizontal, vertical and diagonal wins
- Handles game ending in draw
- Alternates between players
- Prevents further moves after game ends

The core game logic demonstrates important programming concepts like:

- 2D array manipulation
- Loop control flow
- Win condition algorithms
- State management
- Input validation

You can find the complete code in the [GitHub repository](https://github.com/christianguevara/connect-4).
